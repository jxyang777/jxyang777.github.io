<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8"></meta>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>捐款資金流向追蹤系統</title>
    <style>
        body{margin-top:0px;;margin-left:auto;margin-right:auto;font-size:20px;font-family:"微軟正黑體";background-color:#DDBEA9;text-align:center;color:#743A3A;padding:0px;}
        .head1{margin-top:50px;width:600px;margin-left:auto;margin-right:auto;background-color:#CB997E;color:white;font-weight:bold;font-size:25px;text-align:center;padding:20px;}
        button{font-size:15px;background:white;border:2px solid black;}
        input{border:2px solid black;font-size:15px;}
        .box{margin-top:0px;width:600px;margin-left:auto;margin-right:auto;background-color:#FFE8D6;padding:20px;}
        .button1 {
            padding: 5px 15px;
            background-color:#CB997E ;
            border: 0 none;
            cursor: pointer;
            -webkit-border-radius: 5px;
            border-radius: 5px;
            color:white;
            font-size:15px;
            
        }
    button{font-size:15px;
        background-color:white;
        border:3px solid #CB997E;
        color:#743A3A;
    }
      a{color:white;}
	  form>.ok{
    color: rgb(47, 26, 139);
}

 form>input:valid+.ok{

  display: inline;

}


form>input:invalid+.ok{

display: none;

}
        </style>
    <link href='註冊角色_fundraiser.css' rel='stylesheet' type='text/css'>
	<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
</head>
<body>
    <div class="head1">申請帳號密碼</div>
    <div class="box">
	<form onsubmit="alert('表單送出');">
	<label for="address">帳號</label>
	<br>
	<input type="text"  required pattern="[0-9a-zA-Z]{42,}"id="address" name="address" placeholder="EX:0x5FC953397D6060E157d718eC64822dCe1314eC44" name="帳號">
	<span class="ok">ok</span>
	<br>
	<label for="password" class="col-lg-2 control-label">密碼</label>
	<br>
	<input type="password" required pattern="[0-9a-zA-Z]{10,12}" name="password" id="password" placeholder="密碼" name="密碼">
	<span class="ok">ok</span>
	<br>
	<label for="name" class="col-lg-2 control-label">姓名</label>
	<br>
	<input type="text" required pattern="[a-zA-Z]{3,5}" id="name" name="name" placeholder="請輸入名字">
	<span class="ok">ok</span>
	<br>
	<label for="phoneNumber" class="col-lg-2 control-label">電話號碼</label>
	<br>
	<input type="tel" required pattern="[0-9]{10,11}" id="phoneNumber" name="phoneNumber" placeholder="請輸入電話">
	<span class="ok">ok</span>
	<br>
	<label for="email" class="col-lg-2 control-label">e-mail信箱</label>
	<br>
	<input type="email" required  id="email" name="email" placeholder="請輸入信箱">
	<span class="ok">ok</span>
	<br>
	<br>
	</form>
                <button id="signUpPayee">註冊為Payee</button>
				<br>
				<br>
                <br>
                <br>
                <button onclick="history.back()" class="button1"><a href="三方註冊畫面.html">Back</a></button>
				<button class="button1"><a href="index.html">完成</a></button>
	<script>
	
		if (window.ethereum) {
			web3 = new Web3(window.ethereum);
		    window.ethereum.enable();
		}
		else {
			// set the provider you want from Web3.providers
			web3 = new Web3(new Web3.providers.HttpProvider("http://192.168.50.75:8545"));
		}
		var infoContract = new web3.eth.Contract([
	{
		"constant": false,
		"inputs": [
			{
				"name": "_fundraiser",
				"type": "address"
			}
		],
		"name": "donate",
		"outputs": [],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_password",
				"type": "string"
			},
			{
				"name": "_name",
				"type": "string"
			},
			{
				"name": "_phoneNumber",
				"type": "string"
			},
			{
				"name": "_email",
				"type": "string"
			}
		],
		"name": "signUpFundraiser",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "_fundraiser",
				"type": "address"
			}
		],
		"name": "searchMyValue",
		"outputs": [
			{
				"name": "",
				"type": "address[]"
			},
			{
				"name": "",
				"type": "uint256[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "_fundraiser",
				"type": "address"
			}
		],
		"name": "getBuyList",
		"outputs": [
			{
				"name": "",
				"type": "address[]"
			},
			{
				"name": "",
				"type": "uint256[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getDonorList",
		"outputs": [
			{
				"name": "",
				"type": "address[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_password",
				"type": "string"
			}
		],
		"name": "signUpDonor",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_password",
				"type": "string"
			},
			{
				"name": "_name",
				"type": "string"
			},
			{
				"name": "_phoneNumber",
				"type": "string"
			},
			{
				"name": "_email",
				"type": "string"
			}
		],
		"name": "signUpPayee",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "_fundraiser",
				"type": "address"
			}
		],
		"name": "search",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "_fundraiser",
				"type": "address"
			}
		],
		"name": "getTotalValue",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "fundraiserList",
		"outputs": [
			{
				"name": "",
				"type": "address[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "payeeList",
		"outputs": [
			{
				"name": "",
				"type": "address[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "_password",
				"type": "string"
			}
		],
		"name": "verify",
		"outputs": [
			{
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "donorList",
		"outputs": [
			{
				"name": "",
				"type": "address[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "_funOrPayee",
				"type": "address"
			}
		],
		"name": "showFunOrPayeeInfo",
		"outputs": [
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_payee",
				"type": "address"
			}
		],
		"name": "buy",
		"outputs": [],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	}
], '0xd9722598d0BdDF533eA486808f518A26035F1AaB');

        $("#signUpPayee").click(function () {
			var result=infoContract.methods.signUpPayee($("#password").val(),$("#name").val(),$("#phoneNumber").val(),$("#email").val()).send({ from: $("#address").val() , gas:500000 });
			result.catch(err=>{
				alert("註冊失敗!" + err);
				
			})
			result.then(function(){
				alert("註冊成功!");
			})
			
			
			
			
		});
    
	</script>
    </div>
</body>

</html>
